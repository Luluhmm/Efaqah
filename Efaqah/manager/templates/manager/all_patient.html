{% extends 'doctor/base.html' %}
{% block title %}All Patients {% endblock %}
{% block content %}
<div class="bg-white rounded-lg border shadow-sm w-full max-w-4xl mx-auto p-6">
        <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6">

    <h2 class="text-2xl text-blue-800">All Patient</h2>
    
    <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4">
        
        <p class="text-gray-700 font-medium">
            Total Nurses: <span class="text-blue-700 font-semibold">{{ total_patient }}</span>
        </p>
        
        <a href="{% url 'nurse:add_patient_view'%}"
           class="bg-blue-100 text-blue-700 font-medium px-4 py-2 rounded-lg hover:bg-blue-200 transition">
           + Add Patient
        </a>
        
        <a href="{% url 'manager:manager_dashboard' %}" 
           class="bg-gray-100 text-gray-700 font-medium px-4 py-2 rounded-lg hover:bg-gray-200 transition">
           ‚Üê Back
        </a>
        
    </div>
</div>

<!-- Flash Messages -->
{% if messages %}
    <div class="space-y-2 mb-4">
        {% for message in messages %}
            <div class="{% if message.tags == 'success' %}bg-green-100 text-green-700 border border-green-300{% elif message.tags == 'error' %}bg-red-100 text-red-700 border border-red-300{% else %}bg-gray-100 text-gray-700 border border-gray-300{% endif %} px-4 py-2 rounded-md">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}

            <div id="patient-overview-list" class="space-y-3">
                {% if page_obj %}
                 {% for patient in page_obj %}
                    {% include "nurse/patient_card.html" %}
                {% endfor %}
            {% else %}
                <p class="text-gray-500 text-sm">No Patients added yet.</p>
            {% endif %}
        </div>
         {% if page_obj.has_other_pages %}
        <nav class="flex justify-center mt-6" aria-label="Page navigation">
        <ul class="inline-flex items-center -space-x-px">

            <!-- Previous -->
            {% if page_obj.has_previous %}
            <li>
                <a href="?page={{ page_obj.previous_page_number }}"
                class="px-3 py-2 ml-0 leading-tight text-blue-600 bg-white border border-gray-300 rounded-l-lg hover:bg-blue-50 hover:text-blue-700">
                &laquo;
                </a>
            </li>
            {% else %}
            <li>
                <span
                class="px-3 py-2 ml-0 leading-tight text-gray-400 bg-gray-100 border border-gray-200 rounded-l-lg cursor-not-allowed">
                &laquo;
                </span>
            </li>
            {% endif %}

            <!-- Page numbers -->
            {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <li>
                <span
                    class="px-3 py-2 leading-tight text-white bg-blue-600 border border-blue-600">
                    {{ num }}
                </span>
                </li>
            {% else %}
                <li>
                <a href="?page={{ num }}"
                    class="px-3 py-2 leading-tight text-blue-600 bg-white border border-gray-300 hover:bg-blue-50 hover:text-blue-700">
                    {{ num }}
                </a>
                </li>
            {% endif %}
            {% endfor %}

            <!-- Next -->
            {% if page_obj.has_next %}
            <li>
                <a href="?page={{ page_obj.next_page_number }}"
                class="px-3 py-2 leading-tight text-blue-600 bg-white border border-gray-300 rounded-r-lg hover:bg-blue-50 hover:text-blue-700">
                &raquo;
                </a>
            </li>
            {% else %}
            <li>
                <span
                class="px-3 py-2 leading-tight text-gray-400 bg-gray-100 border border-gray-200 rounded-r-lg cursor-not-allowed">
                &raquo;
                </span>
            </li>
            {% endif %}

        </ul>
        </nav>
{% endif %}

    </div>
           
</div>
{% endblock %}
